{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\App.svelte",
    "..\\..\\PercussionStops.svelte",
    "..\\..\\FluteStops.svelte",
    "..\\..\\BassSplit.svelte",
    "..\\..\\SyntheSlalom.svelte",
    "..\\..\\SpecialEffects.svelte",
    "..\\..\\OrganStopButton.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import Tone from 'tone';\n  import PercussionStops from './PercussionStops.svelte';\n  import FluteStops from './FluteStops.svelte';\n  import SpecialEffects from './SpecialEffects.svelte';\n  import SyntheSlalom from './SyntheSlalom.svelte';\n  import BassSplit from './BassSplit.svelte';\n  import { onMount } from 'svelte';\n\n  //svelte components\n  let flutes;\n  let perc;\n  let bass;\n  let slalom;\n  let fx;\n\n  //state of bass split;\n  let bassSplit;\n\n  //maybe change play and stop note functions to for loops of synths\n  function playNote(event) {\n    if (bassSplit && event.detail.pitch < 48) {\n      bass.playNote(event);\n    } else {\n      flutes.playNote(event);\n      perc.playNote(event);\n      fx.playNote(event);\n    }\n  }\n\n  function stopNote(event) {\n    if (bassSplit && event.detail.pitch < 48) {\n      bass.stopNote(event);\n    } else {\n      flutes.stopNote(event);\n      perc.stopNote(event);\n      fx.stopNote(event);\n    }\n  }\n\n  //synths and signals to attach slolam to\n  let fxDetune;\n  let synths = [];\n\n  //chain the slalom signal to each synth\n  let slalomSignal;\n  $: {\n    if (typeof slalomSignal !== 'undefined') {\n      //connect slalom to first 5 synths\n      for (const synth in synths) {\n        if(synth !== \"fxPiano\" && synth !== \"fxHarpsichord\")\n          slalomSignal.connect(synths[synth].detune)\n      }\n      //connect slalom to the fx detune\n      slalomSignal.connect(fxDetune);\n    }\n  };\n\n  //connect all synths to the output effects\n  let fxInput;\n  let percOutput;\n  onMount(async () => {\n    for (const synth in synths) {\n      if(synth !== \"percussion\")\n        synths[synth].connect(fxInput);\n    };\n    //percussion has a separate output\n    percOutput.connect(fxInput);\n\t});\n\n  //function to stop all notes when appropriate\n  function flushAll(event) {\n    synths.forEach((synth) => {\n      synth.releaseAll(0.005);\n    });\n  }\n\n  //stop all notes when exiting tab\n  window.addEventListener(\"visibilitychange\", flushAll);\n</script>\n\n<ion-app>\n  <midi-input on:noteon={playNote} on:noteoff={stopNote} on:firston={(slalom.startSlalom)} on:flush={flushAll}></midi-input>\n  <ion-content class=\"ion-justify-content-center ion-wrap\" color=\"dark\">\n    <div>\n      <FluteStops\n        bind:this={flutes}\n        bind:flutes={synths[2]}/>\n\n      <PercussionStops\n        bind:this={perc}\n        bind:percussion={synths[\"percussion\"]}\n        bind:percOutput={percOutput}/>\n\n\t\t\t<BassSplit\n        bind:this={bass}\n        bind:bassSplitState={bassSplit}\n        bind:bass={synths[\"bass\"]}\n        bind:strings={synths[\"bassStrings\"]}/>\n\n      <SpecialEffects\n        bind:this={fx}\n        bind:detune={fxDetune}\n        bind:piano={synths[\"fxPiano\"]}\n        bind:harpsichord={synths[\"fxHarpsichord\"]}\n        bind:vibrato={fxInput}/>\n\n\t\t\t<SyntheSlalom\n        bind:this={slalom}\n        bind:slalomSignal={slalomSignal}/>\n\n    </div>\n  </ion-content>\n</ion-app>\n\n<button type=\"button\" name=\"button\" on:click={async ()=> { await Tone.start()}}>Start Audio</button>\n\n<style>\n  @media only screen and (min-width: 768px) {\n    div {\n      margin: 10px;\n      display: grid;\n      grid-gap: 10px;\n      grid-template-areas: 'flutes flutes' 'perc fx' 'bass slalom';\n    }\n  }\n\n  @media only screen and (min-width: 1200px) {\n    div {\n      grid-template-areas: 'flutes flutes perc' 'fx bass perc' 'fx bass slalom';\n      height: calc(100% - 20px);\n    }\n  }\n</style>\n\n<svelte:head>\n  <script type=\"module\" src=\"midi-input.js\"></script>\n  <script type=\"module\" src=\"https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js\"></script>\n  <script nomodule src=\"https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js\"></script>\n  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css\" />\n\t<link href=\"https://fonts.googleapis.com/css?family=Roboto:500,900i&display=swap\" rel=\"stylesheet\">\n\n  <style>\n    :root {\n      --ion-color-primary: #edb3ba;\n      --ion-color-primary-rgb: 237, 179, 186;\n      --ion-color-primary-contrast: #000000;\n      --ion-color-primary-contrast-rgb: 0, 0, 0;\n      --ion-color-primary-shade: #d19ea4;\n      --ion-color-primary-tint: #efbbc1;\n      --ion-color-secondary: #0CFCEB;\n      --ion-color-secondary-rgb: 12, 252, 235;\n      --ion-color-secondary-contrast: #000000;\n      --ion-color-secondary-contrast-rgb: 0, 0, 0;\n      --ion-color-secondary-shade: #0bdecf;\n      --ion-color-secondary-tint: #24fced;\n      --ion-color-tertiary: #DEE8C8;\n      --ion-color-tertiary-rgb: 222, 232, 200;\n      --ion-color-tertiary-contrast: #000000;\n      --ion-color-tertiary-contrast-rgb: 0, 0, 0;\n      --ion-color-tertiary-shade: #c3ccb0;\n      --ion-color-tertiary-tint: #e1eace;\n      --ion-color-success: #10dc60;\n      --ion-color-success-rgb: 16, 220, 96;\n      --ion-color-success-contrast: #ffffff;\n      --ion-color-success-contrast-rgb: 255, 255, 255;\n      --ion-color-success-shade: #0ec254;\n      --ion-color-success-tint: #28e070;\n      --ion-color-warning: #ffce00;\n      --ion-color-warning-rgb: 255, 206, 0;\n      --ion-color-warning-contrast: #ffffff;\n      --ion-color-warning-contrast-rgb: 255, 255, 255;\n      --ion-color-warning-shade: #e0b500;\n      --ion-color-warning-tint: #ffd31a;\n      --ion-color-danger: #f04141;\n      --ion-color-danger-rgb: 245, 61, 61;\n      --ion-color-danger-contrast: #ffffff;\n      --ion-color-danger-contrast-rgb: 255, 255, 255;\n      --ion-color-danger-shade: #d33939;\n      --ion-color-danger-tint: #f25454;\n      --ion-color-dark: #000000;\n      --ion-color-dark-rgb: 0, 0, 0;\n      --ion-color-dark-contrast: #ffffff;\n      --ion-color-dark-contrast-rgb: 255, 255, 255;\n      --ion-color-dark-shade: #000000;\n      --ion-color-dark-tint: #1a1a1a;\n      --ion-color-medium: #29353b;\n      --ion-color-medium-rgb: 41, 53, 59;\n      --ion-color-medium-contrast: #ffffff;\n      --ion-color-medium-contrast-rgb: 255, 255, 255;\n      --ion-color-medium-shade: #242f34;\n      --ion-color-medium-tint: #3e494f;\n      --ion-color-light: #f4f5f8;\n      --ion-color-light-rgb: 244, 244, 244;\n      --ion-color-light-contrast: #000000;\n      --ion-color-light-contrast-rgb: 0, 0, 0;\n      --ion-color-light-shade: #d7d8da;\n      --ion-color-light-tint: #f5f6f9;\n\n\t\t\t--ion-font-family: 'Roboto', sans-serif;\n    }\n\n\t\tion-card, ion-select {\n\t\t\t--background: var(--ion-color-medium);\n\t\t\tcolor: var(--card-color);\n\t\t}\n\n\t\tion-card ion-item {\n\t\t\t--background: var(--ion-color-medium);\n\t\t\t--border-color: var(--ion-color-dark);\n\t\t}\n\n\t\tion-card-title {\n\t\t\t--color: var(--card-color);\n\t\t\tfont-family: 'Roboto', sans-serif;\n\t\t\tfont-weight: 900;\n\t\t\tfont-style: italic;\n\t\t\tfont-size: 2.5vmin;\n\t\t}\n\n\t  ion-range {\n\t    --bar-background: var(--ion-color-dark);\n\t    --bar-background-active: var(--card-color-shade);\n\t    --knob-background: var(--card-color);\n\t    --pin-color: var(--card-color-tint);\n\t  }\n\n\t\tion-toggle {\n\t\t\t--background-checked: var(--card-color-shade);\n\t\t\t--handle-background-checked: var(--card-color-tint);\n\t\t\t--handle-background: var(--card-color-tint);\n\t\t}\n\n\t\tion-label {\n\t\t\t--color: var(--card-color) !important;\n\t\t}\n\n    ion-content {\n      perspective: 1000px;\n    }\n\n    @media only screen and (min-width: 768px) {\n      ion-card {\n        margin: 0 !important;\n      }\n      ion-content {\n        perspective: 1500px;\n      }\n    }\n  </style>\n</svelte:head>\n",
    "<script>\r\n  import Tone from 'tone';\r\n  import OrganStopButton from './OrganStopButton.svelte';\r\n\r\n  export let percussion = new Tone.PolySynth(6, Tone.Synth, {\r\n    oscillator : {\r\n      type : \"sine\"\r\n    },\r\n    envelope : {\r\n      attack: 0.005,\r\n      decay: 0.1,\r\n      sustain: 0,\r\n      release: 0.005\r\n    }\r\n  });\r\n\r\n  let percussionStops = [{name: '8', active: false},\r\n                         {name: '5 1/3', active: false},\r\n                         {name: '2 2/3', active: false},\r\n                         {name: '2', active: false}];\r\n\r\n   $: percussion.set({\r\n   \"oscillator\" : {\r\n     \"partials\" : [0,\r\n                   percussionStops[0].active ? 1 : 0,\r\n                   percussionStops[1].active ? 0.5 : 0,\r\n                   0,\r\n                   percussionStops[2].active ? 0.125 : 0,\r\n                   percussionStops[3].active ? 0.0625 : 0]\r\n     }\r\n   });\r\n\r\n  let volumeSignal = new Tone.Signal(0).connect(percussion.volume);\r\n\r\n  //reapeat dsp\r\n  export let percOutput = new Tone.Gain();\r\n  let scale = new Tone.ScaleExp(0, 1, 10);\r\n  let lfo = new Tone.LFO(3, 1, 0).connect(scale);\r\n  lfo.type = \"sawtooth80\";\r\n  percussion.connect(percOutput);\r\n\r\n  let decayRange = [];\r\n\r\n  //Toggle Repeat\r\n  let repeat = false;\r\n  function toggleRepeat(event) {\r\n    repeat = event.target.checked;\r\n    percussion.releaseAll();\r\n\r\n    if (repeat) {\r\n      console.log(\"repeat\");\r\n\r\n      decayRange.min = -15;\r\n      decayRange.max = -1;\r\n\r\n      scale.connect(percOutput.gain);\r\n      lfo.start(0);\r\n      percussion.set( {\r\n        \"envelope\" : {\r\n          \"decay\" : 0,\r\n          \"sustain\" : 1,\r\n          \"release\" : 0.005\r\n        }\r\n      });\r\n    } else {//reset the envelope decay\r\n      decayRange.min = 3;\r\n      decayRange.max = 75;\r\n\r\n      lfo.stop(0);\r\n      scale.disconnect();\r\n      percOutput.gain.rampTo(1);\r\n      percussion.set( {\r\n        \"envelope\" : {\r\n          \"decay\" : 0.1,\r\n          \"sustain\" : 0\r\n        }\r\n      });\r\n    }//end if else\r\n  }\r\n\r\n  function setDecay(event) {\r\n    let value = event.target.value;\r\n\r\n    if (repeat) {\r\n      scale.exponent = value * -1;\r\n    } else {\r\n      percussion.set( {\r\n        \"envelope\" : {\r\n          \"decay\" : value / 100\r\n        }\r\n      });\r\n    }\r\n\r\n  }//end setDecay\r\n\r\n  export function playNote(event) {\r\n    console.log(\"perc attack\");\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    if (repeat) {\r\n      percussion.triggerAttack(note);\r\n    } else {\r\n      percussion.triggerAttackRelease(note);\r\n    }\r\n  }\r\n\r\n  export function stopNote(event) {\r\n    console.log(\"perc release\");\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    if (repeat) {\r\n      percussion.triggerRelease(note);\r\n    }\r\n  }\r\n</script>\r\n\r\n<ion-card>\r\n  <ion-card-header>\r\n    <ion-card-title>PERCUSSION</ion-card-title>\r\n  </ion-card-header>\r\n\r\n  <ion-card-content>\r\n    {#each percussionStops as stop}\r\n      <OrganStopButton stopType={\"percussion\"} name={stop.name} bind:active={stop.active} />\r\n    {/each}\r\n  </ion-card-content>\r\n\r\n    <!--Volume Slider-->\r\n    <ion-item lines=\"none\">\r\n      <ion-label position=\"stacked\">Volume</ion-label>\r\n      <ion-range min=\"0\" max=\"100\" pin mode=\"ios\"\r\n        value={Math.floor(volumeSignal.value * 1000)}\r\n        on:ionChange={e =>  volumeSignal.rampTo(e.target.value / 1000)}></ion-range>\r\n    </ion-item>\r\n\r\n    <!--Decay Slider-->\r\n    <ion-item>\r\n      <ion-label position=\"stacked\">Decay</ion-label>\r\n        <ion-range\r\n          mode=\"ios\"\r\n          bind:this={decayRange}\r\n          on:ionChange={setDecay}></ion-range>\r\n    </ion-item>\r\n\r\n    <!--Repeat Section-->\r\n    <ion-item lines=\"none\">\r\n      <ion-label>Note Repeat</ion-label>\r\n      <ion-toggle slot=\"end\" mode=\"md\"\r\n        value={repeat}\r\n        on:ionChange={toggleRepeat}></ion-toggle>\r\n    </ion-item>\r\n    <ion-item lines=\"none\">\r\n      <ion-label position=\"stacked\">Rate</ion-label>\r\n      <ion-range\r\n        mode=\"ios\"\r\n        min=\"2\" max=\"15\"\r\n        disabled={!repeat}\r\n        value={lfo.frequency.value}\r\n        on:ionChange={ e => lfo.frequency.rampTo(e.target.value) }>\r\n      </ion-range>\r\n    </ion-item>\r\n\r\n</ion-card>\r\n\r\n<style>\r\n  ion-card-content {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n  }\r\n\r\n  ion-card {\r\n    --card-color: var(--ion-color-secondary);\r\n    --card-color-shade: var(--ion-color-secondary-shade);\r\n    --card-color-tint: var(--ion-color-secondary-shade);\r\n    grid-area: perc;\r\n  }\r\n</style>\r\n",
    "<script>\r\n  import Tone from 'tone';\r\n  import OrganStopButton from './OrganStopButton.svelte';\r\n\r\n  export let flutes = new Tone.PolySynth(6, Tone.Synth, {\r\n    oscillator : {\r\n      type : \"sine\"\r\n    },\r\n    envelope : {\r\n      attack: 0.005,\r\n      decay: 0,\r\n      sustain: 1,\r\n      release: 0.005\r\n    }\r\n  });\r\n\r\n  let fluteStops = [{name: '16', active: true},\r\n                    {name: '8', active: false},\r\n                    {name: '5 1/3', active: false},\r\n                    {name: '4', active: false},\r\n                    {name: '2 2/3', active: true},\r\n                    {name: '2', active: false},\r\n                    {name: '1 3/5', active: false},\r\n                    {name: '1 1/3', active: false}];\r\n\r\n\r\n  $: flutes.set({\r\n  \"oscillator\" : {\r\n    \"partials\" : [fluteStops[0].active ? 1 : 0,\r\n                  fluteStops[1].active ? 1 : 0,\r\n                  fluteStops[2].active ? 0.5 : 0,\r\n                  fluteStops[3].active ? 0.25 : 0,\r\n                  fluteStops[4].active ? 0.125 : 0,\r\n                  fluteStops[5].active ? 0.0625 : 0,\r\n                  fluteStops[6].active ? 0.03125 : 0,\r\n                  fluteStops[7].active ? 0.015625 : 0]\r\n    }\r\n  });\r\n\r\n  let volumeSignal = new Tone.Signal(0).chain(flutes.volume);\r\n\r\n  export function playNote(event) {\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    flutes.triggerAttack(note);\r\n\r\n  }\r\n\r\n  export function stopNote(event) {\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    flutes.triggerRelease(note);\r\n  }\r\n</script>\r\n\r\n<ion-card>\r\n  <ion-card-header>\r\n    <ion-card-title >FLUTES</ion-card-title>\r\n  </ion-card-header>\r\n  <ion-card-content>\r\n    {#each fluteStops as stop}\r\n      <OrganStopButton stopType={\"flute\"} name={stop.name} bind:active={stop.active} />\r\n    {/each}\r\n  </ion-card-content>\r\n\r\n  <ion-item lines=\"none\">\r\n    <ion-label position=\"stacked\">Volume</ion-label>\r\n    <ion-range pin mode=\"ios\"\r\n      value={Math.floor(volumeSignal.value * 1000)}\r\n      on:ionChange={e => volumeSignal.rampTo(e.target.value /1000, 0.1)}\r\n    ></ion-range>\r\n  </ion-item>\r\n</ion-card>\r\n\r\n<style>\r\n  ion-card-content {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n  }\r\n\r\n  ion-card {\r\n    --card-color: var(--ion-color-primary);\r\n    --card-color-shade: var(--ion-color-primary-shade);\r\n    --card-color-tint: var(--ion-color-primary-tint);\r\n    grid-area: flutes;\r\n  }\r\n</style>\r\n",
    "<script>\r\n  import Tone from 'tone';\r\n  export let bassSplitState = false;\r\n\r\n  export let bass = new Tone.PolySynth(4, Tone.Synth, {\r\n    oscillator : {\r\n      type : \"sine\"\r\n    },\r\n    envelope : {\r\n      attack: 0.005,\r\n      decay: 0.01,\r\n      sustain: 0.2,\r\n      release: 0.005\r\n    }\r\n  });\r\n\r\n  export let strings = new Tone.PolySynth(4, Tone.Synth, {\r\n    oscillator : {\r\n      type : \"sawtooth\"\r\n    },\r\n    envelope : {\r\n      attack: 0.005,\r\n      decay: 0.01,\r\n      sustain: 0.2,\r\n      release: 0.005\r\n    }\r\n  });\r\n\r\n  let mono = false;\r\n  function monoToggle(event) {\r\n    mono = event.target.checked;\r\n    bass.releaseAll();\r\n    strings.releaseAll();\r\n  }\r\n\r\n  let volumeBass = new Tone.Signal(0).chain(bass.volume);\r\n  let volumeStrings = new Tone.Signal(0).chain(strings.volume);\r\n\r\n  function setAttack(event) {\r\n    bass.set({\r\n      \"envelope\" : {\r\n        \"decay\" : event.target.value / 1000\r\n      }\r\n    });\r\n\r\n    strings.set({\r\n      \"envelope\" : {\r\n        \"decay\" : event.target.value / 1000\r\n      }\r\n    });\r\n  }\r\n\r\n  export function playNote(event) {\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    if(mono) {\r\n      bass.voices[0].triggerAttack(note);\r\n      strings.voices[0].triggerAttack(note);\r\n    } else {\r\n      bass.triggerAttack(note);\r\n      strings.triggerAttack(note);\r\n    }\r\n  }\r\n\r\n  export function stopNote(event) {\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    bass.triggerRelease(note);\r\n    strings.triggerRelease(note);\r\n  }\r\n</script>\r\n\r\n<ion-card>\r\n\r\n  <ion-item  lines=\"none\">\r\n    <ion-card-title >BASS SPLIT</ion-card-title>\r\n    <ion-toggle slot=\"end\" mode=\"md\" on:ionChange={e => bassSplitState = e.target.checked}></ion-toggle>\r\n  </ion-item>\r\n\r\n  <ion-item lines=\"none\">\r\n    <ion-label position=\"stacked\">Bass</ion-label>\r\n    <ion-range mode=\"ios\" disabled={!bassSplitState}\r\n      value={Math.floor(volumeBass.value * 1000)}\r\n      on:ionChange={e => volumeBass.rampTo(e.target.value /1000, 0.1)}>\r\n    </ion-range>\r\n  </ion-item>\r\n\r\n  <ion-item>\r\n    <ion-label position=\"stacked\">Strings</ion-label>\r\n    <ion-range mode=\"ios\" disabled={!bassSplitState}\r\n      value={Math.floor(volumeStrings.value * 1000)}\r\n      on:ionChange={e => volumeStrings.rampTo(e.target.value /1000, 0.1)}>\r\n    </ion-range>\r\n  </ion-item>\r\n\r\n  <ion-item>\r\n    <ion-label position=\"stacked\">Attack</ion-label>\r\n    <ion-range mode=\"ios\"\r\n    disabled={!bassSplitState}\r\n    min=\"10\"\r\n    max=\"1000\"\r\n    on:ionChange={setAttack}>\r\n    </ion-range>\r\n  </ion-item>\r\n\r\n  <ion-item lines=\"none\">\r\n    <ion-label>Monophonic</ion-label>\r\n    <ion-toggle slot=\"end\" mode=\"md\"\r\n    disabled={!bassSplitState}\r\n    on:ionChange={monoToggle}></ion-toggle>\r\n  </ion-item>\r\n\r\n</ion-card>\r\n\r\n<style>\r\n  ion-card {\r\n    --card-color: var(--ion-color-tertiary);\r\n    --card-color-shade: var(--ion-color-tertiary-shade);\r\n    --card-color-tint: var(--ion-color-tertiary-tint);\r\n    grid-area: bass;\r\n  }\r\n</style>\r\n",
    "<script>\r\n  import Tone from 'tone';\r\n  export let slalomSignal = new Tone.Signal(0);\r\n\r\n  let range = 0;\r\n  let timer = 0;\r\n  let direction = -1;//-1 is low to high, 1 is high to low\r\n\r\n  $: adjustedRange = range * direction;\r\n\r\n  export function startSlalom() {\r\n    if (range !== 0 && timer !== 0) {\r\n      slalomSignal.value = adjustedRange;\r\n      slalomSignal.targetRampTo(0, timer);\r\n    }\r\n  }\r\n</script>\r\n\r\n<ion-card>\r\n  <ion-card-header>\r\n    <ion-card-title>SYNTHESLALOM</ion-card-title>\r\n  </ion-card-header>\r\n\r\n  <ion-item lines=\"none\">\r\n    <ion-label position=\"stacked\">Range</ion-label>\r\n    <ion-range min=\"0\" max=\"24\" mode=\"ios\"\r\n      snaps\r\n      value={range / 100}\r\n      on:ionChange={e => range = e.target.value * 100}>\r\n    </ion-range>\r\n  </ion-item>\r\n\r\n  <ion-item>\r\n    <ion-label position=\"stacked\">Timer</ion-label>\r\n    <ion-range min=\"0\" max=\"5000\" pin mode=\"ios\"\r\n      value={Math.floor(timer * 1000)}\r\n      on:ionChange={e => timer = e.target.value / 1000}>\r\n    </ion-range>\r\n  </ion-item>\r\n\r\n  <ion-item lines=\"none\">\r\n    <ion-label>Direction</ion-label>\r\n    <ion-select interface=\"popover\"\r\n      value={(direction === -1) ? \"up\" : \"down\"}\r\n      on:ionChange={e => direction = (e.target.value === \"up\") ? -1 : 1}>\r\n      <ion-select-option value=\"up\">Up</ion-select-option>\r\n      <ion-select-option value=\"down\">Down</ion-select-option>\r\n    </ion-select>\r\n  </ion-item>\r\n</ion-card>\r\n\r\n\r\n<style>\r\n  ion-card {\r\n    --card-color: var(--ion-color-primary);\r\n    --card-color-shade: var(--ion-color-primary-shade);\r\n    --card-color-tint: var(--ion-color-primary-tint);\r\n    grid-area: slalom;\r\n  }\r\n</style>\r\n",
    "<script>\r\n  import Tone from 'tone';\r\n\r\n  /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  Scale detune from cents to 0.5 to to 2\r\n  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n  export let detune = new Tone.Signal(0, Tone.Type.Cents);\r\n\r\n  let normalizeUpper = new Tone.Normalize(0, 2400);\r\n  let scaleUpper = new Tone.Scale(0, 1);\r\n  normalizeUpper.connect(scaleUpper);\r\n\r\n  let normalizeLower = new Tone.Normalize(-2400, 0);\r\n  let scaleLower = new Tone.Scale(0.5, 1);\r\n  normalizeLower.connect(scaleLower);\r\n\r\n  let add = new Tone.Add();\r\n\r\n  detune.fan(normalizeUpper, normalizeLower);\r\n\r\n  scaleUpper.connect(add, 0, 0);\r\n  scaleLower.connect(add, 0, 1);\r\n\r\n  //overwrite Tone.Sampler's triggerAttack\r\n  Tone.Sampler.prototype.triggerAttack = function(notes, time, velocity) {\r\n    this.log(\"triggerAttack\", notes, time, velocity);\r\n    if (!Array.isArray(notes)) {\r\n      notes = [notes];\r\n    }\r\n    for (var i = 0; i < notes.length; i++) {\r\n      var midi = Tone.Frequency(notes[i]).toMidi();\r\n      // find the closest note pitch\r\n      var difference = this._findClosest(midi);\r\n      var closestNote = midi - difference;\r\n      var buffer = this._buffers.get(closestNote);\r\n      var playbackRate = Tone.intervalToFrequencyRatio(difference);\r\n      // play that note\r\n      var source = new Tone.BufferSource({\r\n        \"buffer\": buffer,\r\n        \"playbackRate\": playbackRate,\r\n        \"fadeIn\": this.attack,\r\n        \"fadeOut\": this.release,\r\n        \"curve\": this.curve,\r\n      }).connect(this.output);\r\n      var detune = new Tone.Multiply(playbackRate).connect(source.playbackRate);\r\n      add.connect(detune);\r\n      source.start(time, 0, buffer.duration / playbackRate, velocity);\r\n      // add it to the active sources\r\n      if (!Tone.isArray(this._activeSources[midi])) {\r\n        this._activeSources[midi] = [];\r\n      }\r\n      this._activeSources[midi].push(source);\r\n\r\n      //remove it when it's done\r\n      source.onended = function() {\r\n        if (this._activeSources && this._activeSources[midi]) {\r\n          var index = this._activeSources[midi].indexOf(source);\r\n          if (index !== -1) {\r\n            this._activeSources[midi].splice(index, 1);\r\n            detune.dispose();\r\n          }\r\n        }\r\n      }.bind(this);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  export let piano = new Tone.Sampler({\r\n    \"C1\": \"../piano/C0-poff.wav\",\r\n    \"C3\": \"../piano/C2-poff.wav\",\r\n    \"C4\": \"../piano/C3-poff.wav\",\r\n    \"C5\": \"../piano/C4-poff.wav\",\r\n    \"C6\": \"../piano/C5-poff.wav\",\r\n  });\r\n\r\n  export let harpsichord = new Tone.Sampler({\r\n    \"B1\": \"../harpsichord/13-C1.wav\",\r\n    \"B2\": \"../harpsichord/25-C2.wav\",\r\n    \"B3\": \"../harpsichord/37-C3.wav\",\r\n    \"B4\": \"../harpsichord/49-C4.wav\",\r\n    \"B5\": \"../harpsichord/61-C5.wav\",\r\n  });\r\n\r\n  let pianoVolume = new Tone.Signal(0).chain(piano.volume);\r\n  let harpsichordVolume = new Tone.Signal(0).chain(harpsichord.volume);\r\n\r\n  export function playNote(event) {\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    piano.triggerAttack(note);\r\n    harpsichord.triggerAttack(note);\r\n  }\r\n\r\n  export function stopNote(event) {\r\n    let note = Tone.Midi(event.detail.pitch).toNote();\r\n    piano.triggerRelease(note);\r\n    harpsichord.triggerRelease(note);\r\n  }\r\n\r\n\r\n  /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  Vibrato\r\n  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n  export const vibrato = new Tone.Vibrato(5, 0.15);\r\n  let vibratoState;\r\n  $: {\r\n    vibrato.wet.rampTo(vibratoState ? 0.7 : 0);\r\n  }\r\n\r\n\r\n  /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n  Reverb\r\n  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n  let reverb = new Tone.Convolver ( \"../reverb/The Barn.wav\").toMaster();\r\n  let currentBuffer = \"The Barn\";\r\n\r\n  let reverbValue = \"off\";\r\n  $: reverbState = (reverbValue === \"off\") ? true : false;\r\n  $: {\r\n    if(reverbValue !== \"off\" && currentBuffer !== reverbValue) {\r\n      vibrato.disconnect().chain(reverb, Tone.Master);\r\n      reverb.load(`../reverb/${reverbValue}.wav`);\r\n      currentBuffer = reverbValue;\r\n    } else if (reverbValue === \"off\") {\r\n      vibrato.disconnect().toMaster();\r\n      reverb.disconnect();\r\n    } else {\r\n      vibrato.disconnect().chain(reverb, Tone.Master);\r\n    }\r\n  }\r\n\r\n  vibrato.chain(reverb);\r\n</script>\r\n\r\n<ion-card>\r\n  <ion-card-header>\r\n    <ion-card-title>SPECIAL EFFECTS</ion-card-title>\r\n  </ion-card-header>\r\n\r\n  <!--Main Control Section-->\r\n  <ion-item lines=\"none\">\r\n    <ion-label position=\"stacked\">Piano</ion-label>\r\n    <ion-range mode=\"ios\"\r\n      value={Math.floor(pianoVolume.value * 100)}\r\n      on:ionChange={e => pianoVolume.rampTo(e.target.value / 100, 0.1)}\r\n    ></ion-range>\r\n  </ion-item>\r\n  <ion-item>\r\n    <ion-label position=\"stacked\">Harpsichord</ion-label>\r\n    <ion-range mode=\"ios\"\r\n      value={Math.floor(harpsichordVolume.value * 900)}\r\n      on:ionChange={e => harpsichordVolume.rampTo(e.target.value / 900, 0.1)}\r\n    ></ion-range>\r\n  </ion-item>\r\n\r\n  <!--Chorus Section-->\r\n  <ion-item lines=\"none\">\r\n    <ion-label slot=\"start\">Vibrato</ion-label>\r\n    <ion-toggle slot=\"end\" mode=\"md\"\r\n      checked={vibratoState}\r\n      on:ionChange={e=> vibratoState = e.target.checked}></ion-toggle>\r\n  </ion-item>\r\n  <ion-item>\r\n    <ion-label position=\"stacked\">Rate</ion-label>\r\n    <ion-range min=\"1\" max=\"8\" pin mode=\"ios\"\r\n      disabled={!vibratoState}\r\n      value={vibrato.frequency.value}\r\n      on:ionChange={e => vibrato.frequency.rampTo(e.target.value)}>\r\n    </ion-range>\r\n  </ion-item>\r\n\r\n  <!--Reverb Section-->\r\n  <ion-item lines=\"none\">\r\n    <ion-label>Reverb</ion-label>\r\n    <ion-select value={reverbValue} interface=\"popover\" on:ionChange={e=> reverbValue = e.target.value}>\r\n      <ion-select-option value=\"off\">Off</ion-select-option>\r\n      <ion-select-option value=\"The Barn\">The Barn</ion-select-option>\r\n      <ion-select-option value=\"Cathedral (Large)\">Cathedral (Large)</ion-select-option>\r\n      <ion-select-option value=\"Cathedral (Small)\">Cathedral (Small)</ion-select-option>\r\n      <ion-select-option value=\"Spring\">Spring</ion-select-option>\r\n    </ion-select>\r\n  </ion-item>\r\n  <ion-item lines=\"none\">\r\n    <ion-label position=\"stacked\">Dry/Wet</ion-label>\r\n    <ion-range mode=\"ios\" disabled={reverbState}\r\n      value={Math.floor(reverb.wet.value * 100)}\r\n      on:ionChange={e => reverb.wet.rampTo(e.target.value / 100)}>\r\n    </ion-range>\r\n  </ion-item>\r\n\r\n</ion-card>\r\n\r\n<style>\r\n  ion-card {\r\n    --card-color: var(--ion-color-secondary);\r\n    --card-color-shade: var(--ion-color-secondary-shade);\r\n    --card-color-tint: var(--ion-color-secondary-tint);\r\n    grid-area: fx;\r\n  }\r\n</style>\r\n",
    "<script>\n\texport let stopType;\n\texport let name;\n\texport let active;\n\n\t$: id = stopType + \"-\" + name;\n\n\tlet x = Math.random() * 100;\n\tlet y = Math.random() * 100;\n\n\t$: color = (stopType === \"flute\") ? \"primary\" : \"secondary\";\n</script>\n\n<label style=\"background-position: {x}% {y}% !important;\n\t\t\t\t\t\t\tbackground-color: var(--ion-color-{color});\" for={id} class:active>\n\t\t<p>{name}</p>\n</label>\n<input type=\"checkbox\" id={id} bind:checked={active}>\n\n<style>\n\tp {\n\t\tcolor: var(--ion-color-dark);\n\t\tfont-size: calc(3vmin * var(--mod));\n\t\tfont-family: 'Roboto', sans-serif;\n\t\tfont-weight: 900;\n\t}\n\n\tinput {\n\t\tdisplay: none;\n\t}\n\n\tlabel {\n\t\t--mod: 1;\n\t\tcursor: pointer;\n\t\tuser-select: none;\n\t\ttransform:rotateX(21deg);\n\t\tmargin: calc(0.4vmin * var(--mod));\n\t\tmargin-top: calc(2.5vmin * var(--mod));\n\t\tmargin-bottom: calc(2.5vmin * var(--mod));\n\t\twidth: calc(20vmin * var(--mod));\n\t\theight: calc(28vmin * var(--mod));\n\t\tborder-radius: 8% 8% 40% 40%;\n\t\ttext-align: center;\n\t\tpadding-top: calc(5vmin * var(--mod));\n\t\tposition: relative;\n\t\tbox-shadow: inset 0px -10px 6px 3px rgba(0,0,0,0.30),\n\t\t\t\t\t\t\t\tinset 5px 3px 10px rgba(255,255,255,0.5);\n\t\tz-index: 2;\n\t\ttransition: all 0.07s;\n\t}\n\n\t.active {\n\t\tz-index: 0;\n\t\ttransform:rotateX(9deg) translateZ(calc(-3vmin * var(--mod)));\n\t\tfilter: brightness(0.95);\n\t\tbox-shadow: inset 0px -3px 5px 3px rgba(0,0,0,0.60);\n\t\tbackground-blend-mode: difference;\n\t\tbackground: white url(\"../bg.gif\") !important;\n\t\tfilter: saturate(110%);\n\t\tbackground-size: 350% auto;\n\t}\n\n\tlabel:after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbox-shadow: 0 14px 28px rgba(0,0,0,0.25),\n\t\t\t\t\t\t\t\t0 10px 10px rgba(0,0,0,0.22);\n\t\tz-index: 1;\n\t\ttransition: all 0.07s;\n\t}\n\n\t.active:after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbox-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n\t\tz-index: 1;\n\t}\n\n\tlabel, label:after {\n\t\tborder-radius: 8% 8% 40% 40%;\n\t}\n\n\t@media only screen and (min-width: 768px) {\n\t\tlabel {\n\t\t\t--mod: 0.45;\n\t\t}\n\t}\n\n\t@media only screen and (min-width: 1920px) {\n\t\tlabel {\n\t\t\t--mod: 0.7;\n\t\t}\n\t}\n</style>\n"
  ],
  "names": [],
  "mappings": "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"
}